<Window x:Class="VerticalScenarioEditer.RoleDictionaryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="役名辞書"
        Width="520"
        Height="420"
        WindowStartupLocation="CenterOwner"
        Background="#F0F0F0">
    <DockPanel Margin="16">
        <TextBlock DockPanel.Dock="Top"
                   Text="色はプルダウンから選択、または「選択」でカラーピッカーを使って指定できます。"
                   Foreground="#666666"
                   Margin="0,0,0,8"/>
        <StackPanel DockPanel.Dock="Bottom"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,12,0,0">
            <Button Content="一覧を更新"
                    Width="96"
                    Margin="0,0,8,0"
                    Click="OnRefreshClick" />
            <Button Content="キャンセル"
                    Width="84"
                    Margin="0,0,8,0"
                    IsCancel="True" />
            <Button Content="保存"
                    Width="84"
                    IsDefault="True"
                    Click="OnSaveClick" />
        </StackPanel>
        <DataGrid x:Name="RoleGrid"
                  ItemsSource="{Binding Entries}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  HeadersVisibility="Column"
                  GridLinesVisibility="None"
                  Background="White">
            <DataGrid.Columns>
                <DataGridTextColumn Header="役名"
                                    Binding="{Binding RoleName}"
                                    IsReadOnly="True"
                                    Width="*" />
                <DataGridTemplateColumn Header="色" Width="180">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <ComboBox ItemsSource="{Binding DataContext.ColorPresets, RelativeSource={RelativeSource AncestorType=Window}}"
                                          IsEditable="True"
                                          Width="120"
                                          Text="{Binding Color, UpdateSourceTrigger=PropertyChanged}" />
                                <Button Content="選択"
                                        Width="48"
                                        Margin="6,0,0,0"
                                        Click="OnPickColorClick" />
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</Window>
